<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog — Tucker Pippin</title>
    <meta name="description" content="Thoughts, updates, and shorter pieces from Tucker Pippin.">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <!-- Background photo rails (desktop only) -->
    <div class="photo-rails">
        <div class="rail rail-left">
            <img src="/uploads/blog_bumper_1.jpg" alt="">
        </div>
        <div class="rail rail-right">
            <img src="/uploads/blog_bumper_2.jpg" alt="">
        </div>
    </div>

    <nav class="site-nav">
        <div class="nav-container">
            <a href="/" class="site-title">Tucker Pippin</a>
            <div class="nav-links">
                <a href="/photos.html">Photos</a>
                <a href="/projects.html">Projects</a>
                <a href="/essays.html">Essays</a>
                <a href="/blog.html" class="active">Blog</a>
                <a href="/admin" class="admin-link">Login</a>
                <span class="contact-link" id="contact-btn">Contact</span>
            </div>
        </div>
    </nav>

    <main class="container">
        <header class="page-header">
            <h1>Blog</h1>
            <p class="page-intro">Shorter thoughts, updates, and things worth sharing.</p>

            <!-- Taleb Quote -->
            <div class="photo-quote quote-box">
                <p class="photo-quote-text">"The minute I was bored with a book or a subject I moved to another one, instead of giving up on reading altogether...</p>
                <p class="photo-quote-text" style="margin-top: 0.5rem;">The trick is to be bored with a specific book, rather than with the act of reading. So the number of the pages absorbed could grow faster than otherwise. And you find gold, so to speak, effortlessly, just as in rational but undirected trial-and-error-based research...</p>
                <p class="photo-quote-text" style="margin-top: 0.5rem;">Trial and error is freedom."</p>
                <p class="photo-quote-author">— Nassim Taleb</p>
            </div>
        </header>

        <div id="blog-feed" class="blog-feed">
            <p class="loading">Loading posts...</p>
        </div>
    </main>

    <footer class="site-footer">
        <p>&copy; 2025 Tucker Pippin. All rights reserved.</p>
    </footer>

    <!-- Contact Modal -->
    <div id="contact-modal" class="contact-modal">
        <div class="contact-modal-content">
            <h3>Get in Touch</h3>
            <p>Send me an email at:</p>
            <div class="email-display" id="email-display">tuckerepippin@gmail.com</div>
            <div class="contact-modal-buttons">
                <button class="copy-email-btn" id="copy-email-btn">Copy Email</button>
                <button class="close-modal-btn" id="close-modal-btn">Close</button>
            </div>
        </div>
    </div>

    <script src="/js/utils.js"></script>
    <script src="/content-loader.js"></script>
    <script>
        const POSTS_PER_PAGE = 10;

        window.addEventListener('DOMContentLoaded', async () => {
            await loadBlogFeed();
        });

        async function loadBlogFeed() {
            const container = document.getElementById('blog-feed');

            try {
                const posts = await loadCollection('blog');

                if (posts.length === 0) {
                    container.innerHTML = '<p class="empty">No blog posts yet.</p>';
                    return;
                }

                // Load full content for first 10 posts
                const recentPosts = posts.slice(0, POSTS_PER_PAGE);
                const fullPosts = await Promise.all(
                    recentPosts.map(post => loadSingleContent('blog', post.slug))
                );

                container.innerHTML = fullPosts.map(post => {
                    let coverImageHtml = '';
                    if (post.cover_image) {
                        coverImageHtml = `<img src="${escapeHtml(post.cover_image)}" alt="${escapeHtml(post.title)}" class="blog-post-image">`;
                    }

                    return `
                        <article class="blog-post-full">
                            <h2 class="blog-post-title">${escapeHtml(post.title)}</h2>
                            <div class="post-meta">
                                <span>by Tucker Pippin</span>
                                <span class="separator">•</span>
                                <time>${formatDate(post.date)}</time>
                            </div>
                            ${coverImageHtml}
                            <div class="post-content">
                                ${post.html}
                            </div>
                        </article>
                    `;
                }).join('');

            } catch (error) {
                console.error('Error loading blog feed:', error);
                container.innerHTML = '<p class="error">Unable to load posts.</p>';
            }
        }
    </script>
    <script src="/js/contact-modal.js"></script>

    <!-- Instant page navigation - preloads links on hover -->
    <script src="//instant.page/5.2.0" type="module" data-instant-intensity="mousedown"></script>
</body>
</html>
